<!doctype html>
<html lang="zh-Hans">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Yoyi Money Tracker</title>
<style>
body{margin:0;font-family:-apple-system;background:#f6f7fb}
header{padding:16px}
.card{background:#fff;border-radius:16px;padding:16px;margin:12px}
.bal{font-size:26px;font-weight:800}
button{padding:12px;border-radius:12px;border:0}
.primary{background:#111;color:#fff}
table{width:100%;border-collapse:collapse}
td,th{padding:10px;border-bottom:1px solid #eee}
.right{text-align:right}
.red{color:#dc2626;font-weight:700}
.green{color:#16a34a;font-weight:700}
.tag{background:#f3f4f6;padding:4px 8px;border-radius:999px}
</style>
</head>

<body>

<header>
<h2>ğŸ§¸ Yoyi çš„å‹å²é’±å°è´¦æœ¬</h2>
</header>

<div class="card">
Save: <span class="bal" id="balSave">0</span> Â¥<br>
Wish: <span class="bal" id="balWish">0</span> Â¥<br>
Give: <span class="bal" id="balGive">0</span> Â¥
</div>

<div class="card">
<h3>æ·»åŠ è®°å½•</h3>
<select id="acct">
<option value="save">Save</option>
<option value="wish">Wish</option>
<option value="give">Give</option>
</select>

<select id="type">
<option value="in">å­˜å…¥</option>
<option value="out">æ”¯å‡º</option>
</select>

<input id="amt" placeholder="é‡‘é¢">
<input id="date" type="date">
<input id="note" placeholder="å¤‡æ³¨">
<button class="primary" onclick="add()">ä¿å­˜</button>
</div>

<div class="card">
<h3>è®°å½•åˆ—è¡¨</h3>
<table>
<thead>
<tr>
<th>æ—¥æœŸ</th>
<th>è´¦æˆ·</th>
<th>ç±»å‹</th>
<th class="right">é‡‘é¢</th>
<th>åˆ†ç±»</th>
<th>å¤‡æ³¨</th>
<th></th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>
</div>

<script>
let data=JSON.parse(localStorage.getItem("money")||'[]');

function save(){localStorage.setItem("money",JSON.stringify(data));}

function render(){
let saveBal=0,wishBal=0,giveBal=0;
data.forEach(t=>{
let v=t.type=="in"?t.amount:-t.amount;
if(t.acct=="save")saveBal+=v;
if(t.acct=="wish")wishBal+=v;
if(t.acct=="give")giveBal+=v;
});
balSave.textContent=saveBal;
balWish.textContent=wishBal;
balGive.textContent=giveBal;

list.innerHTML="";
data.slice().reverse().forEach((t,i)=>{
list.innerHTML+=`
<tr>
<td>${t.date}</td>
<td>${t.acct}</td>
<td>${t.type}</td>
<td class="right ${t.type=="out"?"red":"green"}">${t.type=="out"?"-":"+"}${t.amount}</td>
<td>-</td>
<td>${t.note||""}</td>
<td><button onclick="del(${data.length-1-i})">åˆ </button></td>
</tr>`;
});
}

function add(){
let t={
acct:acct.value,
type:type.value,
amount:Number(amt.value),
date:date.value||new Date().toISOString().slice(0,10),
note:note.value
};
data.push(t);
save();
render();
}

function del(i){data.splice(i,1);save();render();}

render();
</script>

</body>
</html>
